<!DOCTYPE html>
<html lang="it">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>IL GIOCO DEI PACCHI</title>
    <link rel="stylesheet" href="style.css" />
  </head>

  <body class="tv at">
    <div class="app">
      <header class="topbar">
        <div class="title">
          <div class="titleRow">
            <h1 id="gameTitle">IL GIOCO DEI PACCHI</h1>
            <span class="liveBadge" aria-label="Live">LIVE</span>
          </div>
          <p id="subtitle">Scegli una localit√† e prova a portarti a casa il premio migliore!</p>
        </div>

        <div class="status">
          <div class="chip chip-gold">
            <span>Pacchi aperti</span>
            <strong id="openedLabel">0</strong>
          </div>
          <div class="chip chip-blue">
            <span>Il tuo pacco</span>
            <strong id="myCaseLabel">‚Äî</strong>
          </div>
        </div>
      </header>

      <main class="layout">
        <section class="panel prizes">
          <h2>Premi</h2>
          <div class="prizeGrid" id="prizeGrid"></div>
          <div class="legend">
            <span class="dot dot-low"></span> basso
            <span class="dot dot-mid"></span> medio
            <span class="dot dot-high"></span> alto
          </div>
        </section>

        <section class="panel board">
          <div class="boardHeader">
            <h2>Localit√†</h2>
            <div class="hint hint-gold" id="hintText">Inserisci il PIN per iniziare.</div>
          </div>

          <div class="caseGrid" id="caseGrid"></div>

          <div class="actions">
            <button class="btn secondary" id="btnNew">Nuova partita</button>
            <button class="btn secondary" id="btnSwap" disabled>Cambia pacco</button>

            <!-- non usati (offerta obbligatoria via modal) -->
            <button class="btn" id="btnOffer" disabled>Vedi Offerta</button>
            <button class="btn danger" id="btnDeal" disabled>ACCETTA</button>
            <button class="btn ghost" id="btnNoDeal" disabled>RIFIUTA</button>
          </div>
        </section>

        <section class="panel offer">
          <h2>Offerta</h2>

          <div class="offerBox atOffer">
            <div class="bankerRow">
              <div class="bankerAvatar" aria-hidden="true">üíº</div>
              <div>
                <div class="bankerName" id="bankerName">Il Banco</div>
                <div class="bankerLine" id="bankerLine">Inserisci il PIN per giocare.</div>
              </div>
            </div>

            <div class="offerValue atValue">
              <div class="label">Ultima offerta</div>
              <div class="value" id="offerValue">‚Äî</div>
            </div>

            <div class="offerMeta" id="offerMeta">
              <div class="only">
                <span>Pacchi rimasti</span><strong id="casesLeft">‚Äî</strong>
              </div>
            </div>
          </div>

          <div class="result" id="resultBox" hidden>
            <h3 id="resultTitle">Risultato</h3>
            <p id="resultText"></p>
          </div>
        </section>
      </main>

      <footer class="footer">
        <span id="footerText">Stile ‚ÄúAffari Tuoi‚Äù ‚Ä¢ PIN obbligatorio ‚Ä¢ Partita riprende dopo refresh</span>
      </footer>
    </div>

    <!-- MODAL: LOGIN PIN (obbligatorio) -->
    <div class="modal atModal" id="pinModal" hidden>
      <div class="modalCard atCard" role="dialog" aria-modal="true" aria-labelledby="pinTitle">
        <div class="modalTop">
          <div class="modalBadge atBadge" id="pinTitle">ACCESSO</div>
          <!-- niente X: accesso obbligatorio -->
          <div style="width:38px;height:38px;" aria-hidden="true"></div>
        </div>

        <div class="modalBody">
          <div class="atSpotlight" aria-hidden="true"></div>
          <div class="modalIcon atIcon" aria-hidden="true">üîí</div>
          <div class="modalPlace atTitle">INSERISCI IL PIN</div>
          <div class="modalSub atSub">Per giocare √® necessario l‚Äôaccesso.</div>

          <div class="accessForm">
            <input
              id="pinInput"
              class="accessInput atPin"
              type="password"
              inputmode="numeric"
              autocomplete="one-time-code"
              placeholder="PIN"
              maxlength="8"
            />
            <button class="btn atPrimary" id="pinSubmit">ENTRA</button>
          </div>

          <div class="accessError" id="pinError" hidden></div>
        </div>
      </div>
    </div>

    <!-- MODAL: SCEGLI IL TUO PACCO (obbligatorio) -->
    <div class="modal atModal" id="pickModal" hidden>
      <div class="modalCard atCard" role="dialog" aria-modal="true" aria-labelledby="pickTitle">
        <div class="modalTop">
          <div class="modalBadge atBadge" id="pickTitle">SCEGLI IL TUO PACCO</div>
          <button class="modalClose atClose" id="pickClose" aria-label="Chiudi">‚úï</button>
        </div>

        <div class="modalBody">
          <div class="atSpotlight" aria-hidden="true"></div>
          <div class="modalIcon atIcon" aria-hidden="true">üì¶</div>
          <div class="modalPlace atTitle">SCEGLI LA TUA LOCALIT√Ä</div>
          <div class="modalSub atSub">Clicca una localit√† per iniziare.</div>

          <div class="swapGrid" id="pickGrid"></div>
        </div>

        <div class="modalActions">
          <button class="btn secondary" id="pickRandom">Scelta casuale</button>
        </div>
      </div>
    </div>

    <!-- MODAL: PREMIO USCITO -->
    <div class="modal atModal" id="revealModal" hidden>
      <div class="modalCard atCard" role="dialog" aria-modal="true" aria-labelledby="revealTitle">
        <div class="modalTop">
          <div class="modalBadge atBadge" id="revealTitle">PREMIO USCITO</div>
          <button class="modalClose atClose" id="revealClose" aria-label="Chiudi">‚úï</button>
        </div>

        <div class="modalBody">
          <div class="atSpotlight" aria-hidden="true"></div>
          <div class="modalIcon atIcon" aria-hidden="true">üéÅ</div>
          <div class="modalPlace atTitle" id="revealPlace">‚Äî</div>
          <div class="modalPrize atPrize" id="revealPrize">‚Äî</div>
          <div class="modalSub atSub" id="revealSub">Continua ad aprire le localit√†.</div>
        </div>

        <div class="modalActions">
          <button class="btn atPrimary" id="revealOk">OK, continua</button>
        </div>
      </div>
    </div>

    <!-- MODAL: OFFERTA (obbligatorio) -->
    <div class="modal atModal" id="offerModal" hidden>
      <div class="modalCard atCard" role="dialog" aria-modal="true" aria-labelledby="offerTitle">
        <div class="modalTop">
          <div class="modalBadge atBadge" id="offerTitle">OFFERTA DEL BANCO</div>
          <button class="modalClose atClose" id="offerClose" aria-label="Chiudi">‚úï</button>
        </div>

        <div class="modalBody">
          <div class="atSpotlight" aria-hidden="true"></div>
          <div class="modalIcon atIcon" aria-hidden="true">üíº</div>
          <div class="modalPlace atTitle">IL BANCO TI OFFRE:</div>
          <div class="modalPrize atOfferPrize" id="offerModalValue">‚Äî</div>
          <div class="modalSub atSub" id="offerModalSub">Devi scegliere: accetta o rifiuta.</div>
        </div>

        <div class="modalActions two">
          <button class="btn atAccept" id="offerAccept">ACCETTA L'OFFERTA</button>
          <button class="btn atReject" id="offerReject">RIFIUTA L'OFFERTA</button>
        </div>
      </div>
    </div>

    <!-- MODAL: CAMBIO PACCO (obbligatorio) -->
    <div class="modal atModal" id="swapModal" hidden>
      <div class="modalCard atCard" role="dialog" aria-modal="true" aria-labelledby="swapTitle">
        <div class="modalTop">
          <div class="modalBadge atBadge" id="swapTitle">CAMBIO PACCO</div>
          <button class="modalClose atClose" id="swapClose" aria-label="Chiudi">‚úï</button>
        </div>

        <div class="modalBody">
          <div class="atSpotlight" aria-hidden="true"></div>
          <div class="modalIcon atIcon" aria-hidden="true">üîÅ</div>
          <div class="modalPlace atTitle" id="swapMyCase">Il tuo pacco: ‚Äî</div>
          <div class="modalSub atSub" id="swapSub">
            Scegli un pacco con cui scambiare, oppure continua senza cambiare.
          </div>
          <div class="swapGrid" id="swapGrid"></div>
        </div>

        <div class="modalActions">
          <button class="btn secondary" id="swapSkip">Continua senza cambiare</button>
        </div>
      </div>
    </div>

    <script src="script.js"></script>
  </body>
</html>
